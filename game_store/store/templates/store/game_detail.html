{% extends 'store/base.html' %}

{% block title %}{{ game.title }} - Game Store{% endblock %}

{% block content %}
<div style="display: grid; grid-template-columns: 1fr 2fr; gap: 40px;">
    <div>
        {% if game.image %}
        <img src="{{ game.image.url }}" alt="{{ game.title }}" style="width: 100%; border-radius: 8px;">
        {% else %}
        <div style="width: 100%; height: 300px; background: #667eea; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem;">
            üéÆ
        </div>
        {% endif %}
        
        <div style="margin-top: 20px; text-align: center;">
            <p class="game-price" style="font-size: 2rem;">{{ game.price }} ‚ÇΩ</p>
            
            {% if game.quantity > 0 %}
            <form action="{% url 'add_to_cart' game.id %}" method="post">
                {% csrf_token %}
                <div style="margin-bottom: 15px;">
                    <label for="quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <input type="number" id="quantity" name="quantity" value="1" min="1" max="{{ game.quantity }}" style="width: 60px; padding: 5px;">
                </div>
                
                {% if in_cart %}
                <button type="submit" class="btn" style="background: #28a745;">
                    –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ
                </button>
                <p style="margin-top: 10px; color: #666;">–£–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ</p>
                {% else %}
                <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                {% endif %}
            </form>
            {% else %}
            <button class="btn" disabled style="background: #dc3545;">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</button>
            {% endif %}
        </div>
    </div>
    
    <div>
        <h1>{{ game.title }}</h1>
        
        <div style="margin: 20px 0; display: flex; gap: 10px;">
            <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 4px;">
                {{ game.genre.name }}
            </span>
            {% for tag in game.tags.all %}
            <span style="background: #f0f0f0; padding: 5px 10px; border-radius: 4px;">
                {{ tag.name }}
            </span>
            {% endfor %}
        </div>
        
        <div style="margin: 30px 0;">
            <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
            <p style="white-space: pre-line;">{{ game.description }}</p>
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ</h3>
            <table style="width: 100%;">
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #dee2e6;"><strong>–í –Ω–∞–ª–∏—á–∏–∏:</strong></td>
                    <td style="padding: 8px; border-bottom: 1px solid #dee2e6;">{{ game.quantity }} —à—Ç.</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border-bottom: 1px solid #dee2e6;"><strong>–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:</strong></td>
                    <td style="padding: 8px; border-bottom: 1px solid #dee2e6;">{{ game.created_at|date:"d.m.Y" }}</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>ID —Ç–æ–≤–∞—Ä–∞:</strong></td>
                    <td style="padding: 8px;">{{ game.id }}</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<div style="margin-top: 40px;">
    <a href="{% url 'game_list' %}" class="btn">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É</a>
</div>
{% endblock %}